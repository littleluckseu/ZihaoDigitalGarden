# 电源的设计

---

## 需求分析

* **功能**：输入电压、电流（变动范围）；输出电压、电流等，还要达到总体的功率指标，实现系统最大转换效率。
* **性能**：输出电压上的纹波大小、带负载的能力、效率、发热程度等
* **成本**：系统综合成本，不仅计算核心器件，还要包括外围器件，比如电感或线圈、电容、驱动 MOSFET 管等等；板卡面积的增加也会导致系统成本的增加；设计工具、测试设备等等可能带来的系统成本的增加也都一并考虑在内。
* **空间**：任何一个电子产品都是有空间尺寸的限制的，尤其是电源部分在一个电子产品中放置的位置是非常讲究的，要考虑到周边其它电路的空间位置、关键接插件的位置及方向，还有散热、干扰在空间的分布等因素。
* **时间点**：电子产品都有其设计到生产的生命周期，设计的难易程度、元器件的选择等都会直接影响到产品的上市时间，任何一个项目都要以产品规定的时间节点为基础做项目进程的规划。

## 方案确定

线性稳压与开关稳压的对比：

|          |    线性稳压     |     开关稳压     |
| :------: | :-------------: | :--------------: |
|   效率   | 低（30% ~ 60%） | 高（70% ~ 90%）  |
| 稳压模式 |    只能降压     | 降压、升压、反压 |
|  发热量  |       大        |        小        |
|   体积   |       大        |        小        |
|   重量   |       重        |        轻        |
|  稳定度  |       高        |       一般       |
|   噪声   |       无        | 有（需噪声对策） |

**线性稳压** 由工作在线性状态的三极管构成可变电阻对负载进行恒流控制，得到稳定的电压输出，这种方式结构简单、噪声抑制度很高（达到 60dB 也就是 1000 倍以上），但一般效率比较低，要满足输入电压高于输出电压一定的压差才能够稳压，只能做降压变换。常规的线性稳压器的压差高达 2.5V，因此效率比较低。线性稳压电路简单、纹波小，对输入端的毛刺抑制度（PSRR）高，但能量的损耗都以发热的方式通过器件扩散。 
LDO（低压差线性稳压器）可以做到较低的压差，比如在负载高达 1A 的情况下压差可以降低到 350mA，其效率取决于具体使用的输入和输出电压的情况。

**开关稳压** 由工作在开关模式的三极管和储能的电感以及平滑纹波的电容构成，以 PWM 或 PFM 的方式得到稳定的输出电压。开关方式的好处是能够降压、升压、反压，输入电压的范围可以很宽，效率可以做到很高（有的能达到 95% 以上），缺点是外围电路比较复杂，外围元器件的选型比较敏感，另外高频的开关信号会在电压输出上带来较大的干扰、纹波。



### 线性稳压

效率：η = Vout / Vin

**稳压情况**：
* Vout < Vin

**优点**：
* 电路简单、便宜
* 输出端噪声低
* 对噪声的隔离度高
* 快速的瞬态响应



**缺点**：
* 需要一定的压差才能起到稳压的作用，因此只能降压使用
* 在压差比较大的情况下，转换效率比较低，损耗都以 “热” 的方式消耗掉，并影响板卡的稳定性、可靠性
* 功率至上，即便负载电路并不需要很大电流。这样做的后果就是所有元件即便非必要的时候也工作在满负荷下，结果产生高很多的热量。

压降：
![](https://cdn.jsdelivr.net/gh/linyuxuanlin/Wiki-media/img/20200202231005.png)

**应用**：
* 对供电电源的噪声要求严格的模拟电路、时钟产生电路等
* 小电流、电源转换效率影响不大的数字电路供电场景



### 开关稳压 - 电容变换（电荷泵）


**稳压情况**：
* Vout > Vin（两倍、三倍……）
* Vout < Vin（极少见）
* 负压输出（反极性）

**优点**：
* 比 LDO 更高的转换效率
* 设计简单，只需要电容变化

**缺点**：
* 有限的输入输出范围
* 标准的电荷泵是不带调压的，具有调压特性的电荷泵，通常会有较高的损耗
* 非常有限的电流输出能力

![](https://cdn.jsdelivr.net/gh/linyuxuanlin/Wiki-media/img/20200206145007.png)


### 开关稳压 - 电感变换

**稳压情况**：
* Vout > Vin（Boost）
* Vout < Vin（Buck）
* Vin_min < Vout < Vin_max（Buck-Boost）（升降压）
* 负压输出（反极性）

**优点**：
* 能达到最高的效率
* 很多种不同的拓扑结构，可满足更多设计的需求
* 可实现隔离变换


**缺点**：
* 比较复杂的解决方案
* 引入磁场
* 不可避免的开关噪声


![](https://cdn.jsdelivr.net/gh/linyuxuanlin/Wiki-media/img/20200206145045.png)


## 元器件选型

* **功能**：是否满足输入／输出电压及电流要求
* **性能**：尽可能低的纹波、噪声，尽可能高的转换效率
* **价格**：整体系统成本
* **供货渠道**：是否容易购买



![](https://cdn.jsdelivr.net/gh/linyuxuanlin/Wiki-media/img/20200202192814.png)



* 线性稳压
  * **78xx**：固定输出， 最经典的三端稳压器，xx 表示了稳压输出的电压值（LM7805 输出 5V 稳压），最大输出电流为 1A（LM7805 的输出电流为最大 1A，LM78M05 的输出电流最大为 500mA，而 LM78L05 的输出电流最大为 100mA），要求输入电压和输出电压之间的压差为 2.5V 以上，其转换效率为 Vout/Vin（输入 12V 的电压，得到 5v 的稳压输出，其效率为 5/12 = 41.6%，如果负载电流达到 1A 的情况下，7805 器件上的热损耗高达（12-5）*1 = 7W，这就是为什么很多 78xx 系列的器件上必须加上散热片的缘故）
  * **79xx**：固定输出，78xx 得到的是对地正电压，79xx 得到的是对地负电压，经常配对使用。其他参数 78xx 相同
  * **LM317/LM117**：可调输出，输出电压可以调节，最大输出电路可以高达 1.5A，也要求 2.5v 以上的压差才能正常稳压工作，具备与 78xx 一样的优点和缺点
  * **1117 系列**：LDO，要求的输入电压和输出电压的差值为 1.2V. 输出电流只有最高 800mA
  * **LP5907**：LDO，压差则可以做到典型值 120mV，甚至负载电流更小的时候能够在 50mV 的压差下得到稳压输出。效率可以高达 90%. 最大输出电流为 250mA
  * **TPS51200**：LDO，输出电流高达 3A
* 开关稳压
  * **MC34063A**：效率比较低（现在看来开关频率只有 100KHz），对外围器件的要求高（由于开关频率较低，要得到较大的电流输出，所需要的电感的个头就要比较大）
  * **LM2576**：外围电路简单，像线性稳压器，可以在较宽的输入电压范围内获得较高的效率，可以用在不需要在意电源纹波（比如数字器件的供电）的场合替代掉 78xx、317 以及 1117 等
  * **LMZ21701**：工作频率高达 2.5MHz，电路可以做得非常小，在能够供电 1A 的情况下可以输出常用的 1.2V、1.8V、2.5V、3.3V 以及 5V，并且有可调输出的版本
  * **LTM4644**：集成度高，能够提供 4 路输出且拥有较小的体积，可以说是现在高速的处理器、FPGA 最佳的供电选择。其相当高的集成度以及内部的时序控制、保护电路等都是你用很多器件堆不出来的


以上为经典的稳压芯片。在设计电源电路时，我们还可以按电源设计参数来挑选芯片。可以用 [**TI 参考设计**](http://www.ti.com.cn/cn/reference-designs/index.html) 这个工具来辅助芯片选型。

## PCB 设计


尽量根据元件数据手册提供的参考布局。示例：


![](https://cdn.jsdelivr.net/gh/linyuxuanlin/Wiki-media/img/20200202194045.png)


## 参考与致谢
* [最受全球工程师欢迎的 10 款稳压器件](https://mp.weixin.qq.com/s/l4-iG3Ki4R70X8GeHg3OpA)
* [开关电源设计的关键 7 步](https://mp.weixin.qq.com/s/19ePnO54yBIvatcj5nVRBg)
* [开关电源知多少？](https://mp.weixin.qq.com/s/ilSCii7jw9DHfIqorrq5Yg)
* [电子产品中电源电路的设计举例](https://www.eetree.cn/wiki/ps_design_case#%E7%94%B5%E5%AD%90%E4%BA%A7%E5%93%81%E4%B8%AD%E7%94%B5%E6%BA%90%E7%94%B5%E8%B7%AF%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%BE%E4%BE%8B)
* [电源及管理](https://www.eetree.cn/wiki/powersupply)
* [漫画解电源，初学者福音！](https://mp.weixin.qq.com/s/R6c96mmincweZ_xV7ex2QQ)